<template>
    <div id="app-body">
        <div class="instant-purchase-container">
            <article data-v-a178adf6="" class="instant-purchase-order">
                <header data-v-a178adf6="" class="page-heading-b">
                    <h1 data-v-a178adf6="" class="page-title">예약하기</h1>
                </header>
                <div data-v-334d34a3="" data-v-a178adf6="" class="reserve-notice sign-container prisma md">
                    <div data-v-334d34a3="" class="header">
                        <div data-v-334d34a3="" class="title"><span data-v-0d243f1a="" data-v-334d34a3=""
                                class="sg-icon-v1 fill stroke"
                                style="width: 1.25rem; height: 1.25rem; --svg-color: #5080FA;"><svg width="24"
                                    height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM12 9.75C12.5523 9.75 13 9.30228 13 8.75C13 8.19772 12.5523 7.75 12 7.75C11.4477 7.75 11 8.19772 11 8.75C11 9.30228 11.4477 9.75 12 9.75ZM12.75 11.5C12.75 11.0858 12.4142 10.75 12 10.75C11.5858 10.75 11.25 11.0858 11.25 11.5V16C11.25 16.4142 11.5858 16.75 12 16.75C12.4142 16.75 12.75 16.4142 12.75 16V11.5Z"
                                        fill="black"></path>
                                </svg>
                            </span><span data-v-334d34a3="" class="content">결제금액은 서비스 완료 후 고수에게 전달됩니다</span></div>
                        <!---->
                    </div><!---->
                </div>
                <section data-v-a178adf6="" class="product-summary">
                    <div data-v-7fe3a3b6="" data-v-a178adf6="" class="product-summary-container">
                        <div data-v-7fe3a3b6="" class="section-title-container">
                            <div data-v-7fe3a3b6="" class="section-title-box">
                                <h3 data-v-7fe3a3b6="" class="section-title">예약 상품</h3><!---->
                            </div><!---->
                        </div>
                        <ul data-v-7fe3a3b6="" class="product-info">
                            <li data-v-7fe3a3b6=""><span data-v-7fe3a3b6="" class="info-name">상품명</span>
                                <p data-v-7fe3a3b6="" class="info-value"> 취미와 자격증을 동시에! 놀면서 자격증 취득하기!! </p>
                            </li>
                            <li data-v-7fe3a3b6=""><span data-v-7fe3a3b6="" class="info-name">상품 옵션</span>
                                <p data-v-7fe3a3b6="" class="info-value"> 체험 </p>
                            </li>
                            <li data-v-7fe3a3b6=""><span data-v-7fe3a3b6="" class="info-name">상품 가격</span>
                                <p data-v-7fe3a3b6="" class="info-value"> 50,000원 </p>
                            </li>
                        </ul>
                    </div>
                </section>
                <section data-v-a178adf6="" class="product-reservation">
                    <div data-v-6ecf744b="" data-v-a178adf6="">
                        <div data-v-6ecf744b="" class="section-title-box">
                            <h3 data-v-6ecf744b="" class="section-title">일정 정보</h3>
                            <p data-v-6ecf744b="">예약 일시는 서비스 진행 당일입니다</p>
                        </div>
                        <table data-v-6ecf744b="" class="reservation-table">
                            <tbody data-v-6ecf744b="">
                                <tr data-v-6ecf744b="">
                                    <th data-v-6ecf744b="">예약 날짜</th>
                                    <td data-v-6ecf744b="">2024년 8월 6일 (화)</td>
                                </tr>
                                <tr data-v-6ecf744b="">
                                    <th data-v-6ecf744b="">예약 시간</th>
                                    <td data-v-6ecf744b="">오후 03:00</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                <section data-v-a178adf6="" class="payment-methods">
                    <h3 data-v-a178adf6="" class="section-title">결제 수단</h3>
                    <div data-v-a178adf6="" role="radiogroup" tabindex="-1"
                        class="payment-methods-list bv-no-focus-ring" id="__BVID__2116">
                        <div class="custom-control custom-radio"><input type="radio" class="custom-control-input"
                                value="card" id="__BVID__2116_BV_option_0" name="__BVID__2116"><label
                                class="custom-control-label" for="__BVID__2116_BV_option_0"><span>신용/체크카드</span></label>
                        </div>
                    </div>
                </section>
                <section data-v-a178adf6="" class="amount">
                    <h3 data-v-a178adf6="" class="section-title">결제 금액</h3>
                    <table data-v-5b3d2f98="" data-v-a178adf6="">
                        <tbody data-v-5b3d2f98="">
                            <tr data-v-5b3d2f98="" class="amount">
                                <th data-v-5b3d2f98="">서비스 금액</th>
                                <td data-v-5b3d2f98="">
                                    <p data-v-5b3d2f98="">50,000 원</p>
                                </td>
                            </tr>
                            <tr data-v-5b3d2f98="" class="total-amount">
                                <th data-v-5b3d2f98="">최종 결제금액</th>
                                <td data-v-5b3d2f98="">
                                    <p data-v-5b3d2f98="">50,000 원</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div data-v-68c30ab0="" data-v-a178adf6="" class="notification refund-policy"><strong
                            data-v-a178adf6="" data-v-68c30ab0="" class="title">💰 취소/환불은 어떻게 진행되나요?</strong>
                        <p data-v-a178adf6="" data-v-68c30ab0="" class="highlight">결제 직후 3시간 이내로 취소 시 전액 환불처리됩니다.</p>
                        <p data-v-a178adf6="" data-v-68c30ab0="">결제 직후 3시간 이후엔 주문취소가 불가하며 고수님과 환불을 위한 별도의 협의가 필요합니다.</p>
                        <p data-v-a178adf6="" data-v-68c30ab0="">주문취소는 구매내역에서 가능하며, 고수가 서비스를 취소한 경우 고객님의 결제금액이 전액 환불됩니다.
                        </p>
                    </div>
                </section>
                <section data-v-a178adf6="" class="terms">
                    <h3 data-v-a178adf6="" class="section-title">이용동의</h3>
                    <div data-v-a178adf6="" class="instant-purchase-payment-terms">
                        <div data-v-8c4aecaa="" role="group" tabindex="-1" class="bv-no-focus-ring" id="__BVID__2122">
                            <ul data-v-8c4aecaa="">
                                <li data-v-8c4aecaa="" class="term-item">
                                    <div data-v-8c4aecaa="" class="custom-control custom-checkbox"><input
                                            type="checkbox" class="custom-control-input" value="privacyPolicy"
                                            id="__BVID__2123" name="__BVID__2122"><label class="custom-control-label"
                                            for="__BVID__2123">
                                            <p data-v-8c4aecaa="" class="term-label">개인정보 수집 및 이용 동의(필수)</p>
                                        </label></div><button data-v-8c4aecaa="" type="button"
                                        class="btn detail-button btn-none">보기</button>
                                </li>
                                <li data-v-8c4aecaa="" class="term-item">
                                    <div data-v-8c4aecaa="" class="custom-control custom-checkbox"><input
                                            type="checkbox" class="custom-control-input" value="thirdParties"
                                            id="__BVID__2124" name="__BVID__2122"><label class="custom-control-label"
                                            for="__BVID__2124">
                                            <p data-v-8c4aecaa="" class="term-label">제 3자 정보 공유 동의(필수)</p>
                                        </label></div><button data-v-8c4aecaa="" type="button"
                                        class="btn detail-button btn-none">보기</button>
                                </li>
                            </ul>
                        </div><!---->
                    </div>
                    <div data-v-68c30ab0="" data-v-a178adf6="" class="notification pass-phone-number">
                        <p data-v-a178adf6="" data-v-68c30ab0="">결제 후 실제 고객님의 휴대전화번호 대신 안심번호가 고수님에게 제공됩니다.</p>
                    </div>
                </section>
                <section data-v-a178adf6="" class="pay-button">
                    <button data-v-a178adf6="" type="button" :disabled="isPaymentDisabled" @click="payment"
                        class="btn btn-primary btn-block">결제하기</button>
                </section><!---->
            </article>
        </div>
    </div>
</template>

<script>
import axios from 'axios';

export default {
    name: "ProductPayComponent",
    data() {
        return {
            isPaymentDisabled: false
        };
    },
    methods: {
        payment() {
            if (typeof window.IMP === 'undefined') {
                console.error("Iamport script not loaded");
                return;
            }

            const IMP = window.IMP;
            IMP.init("imp68362066");

            IMP.request_pay({
                pg: "kakaopay.TC0ONETIME",
                merchant_uid: "order_no_000" + new Date().getMilliseconds(),
                name: "FIIIIIVE PAY",
                amount: 50000,
                buyer_email: "thdsk4311@sju.ac.kr",
                buyer_name: "snk",
                custom_data: { storeIdx: 1 }
            }, (rsp) => {
                console.log(rsp);

                if (rsp.success) {
                    axios.get(`http://localhost:8080/api/v1/orders/validation/registrationFee?impUid=${rsp.imp_uid}`)
                        .then((response) => {
                            console.log(response.data);
                            if (response.data.success) {
                                alert('Payment completed');
                            } else {
                                alert('Payment failed');
                            }
                        });
                } else {
                    alert("Payment failed");
                }
            });
        }
    }
}
</script>



<style scoped></style>